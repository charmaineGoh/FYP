<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Stock Movement - ESCKWEAR IMS</title>
  <link rel="stylesheet" href="../css/movement.css">
  <!-- Google Fonts -->
  <link href="https://fonts.googleapis.com/css2?family=Raleway:wght@700&family=Work+Sans:wght@400;500;600&display=swap" rel="stylesheet">
  <!-- Bootstrap Icons -->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.css">
</head>
<body>
<div class="app-container">
  <!-- Sidebar -->
  <nav class="sidebar">
    <div class="sidebar-header">
      <h1>ESCKWEAR</h1>
      <!-- Profile Section -->
      <div class="profile-section-sidebar">
        <div class="profile-avatar-sidebar" id="profile-avatar" title="Click to logout">
          <span id="profile-initial">U</span>
        </div>
        <div class="profile-dropdown-sidebar" id="profile-dropdown">
          <div class="profile-name" id="profile-name">User Name</div>
          <button class="logout-btn" onclick="logout()">Logout</button>
        </div>
      </div>
    </div>
    <ul class="sidebar-nav">
      <li><a href="dashboard.html">Dashboard</a></li>
      <li><a href="products.html">Products</a></li>
      <li class="dropdown-toggle">
        <a href="#">Inventory ▼</a>
        <ul class="dropdown-menu">
          <li><a href="inventory.html">Stock Levels</a></li>
          <li class="active"><a href="movement.html">Movement</a></li>
        </ul>
      </li>
      <li><a href="suppliers.html">Suppliers</a></li>
      <li><a href="usermanagement.html">User Management</a></li>
    </ul>
    <div class="sidebar-footer">
        <a href="settings.html">Settings</a>
    </div>    
  </nav>

  <!-- Main Content -->
  <main class="main-content">
    <button class="hamburger-btn" onClick="toggleSidebar()">☰</button>
    <header class="main-header">
      <div class="header-left">
        <h2>Stock Movement</h2>
      </div>
      
      <div class="filter-container">
        <select id="movementTypeFilter">
          <option value="All">All</option>
          <option value="Inbound">Inbound</option>
          <option value="Outbound">Outbound</option>
        </select>
        <input type="text" id="searchInput" placeholder="Search by Stock ID">
        <button id="searchBtn" title="Search Movement">Search</button>
        <button id="addMovementBtn" class="icon-btn" title="Add Movement">+</button>
      </div>
    </header>

    <div id="movementList" class="movement-table">
      <table id="movementTableBody">
        <thead>
          <tr>
            <th>Stock ID</th>
            <th>Movement Type</th>
            <th>From</th>
            <th>To</th>
            <th>Quantity</th>
            <th>Date Updated</th>
            <th>Actions</th>
          </tr>
        </thead>
        <tbody>
          <!-- Rows will be populated dynamically -->
        </tbody>
      </table>
    </div>

  </main>
</div>

<!-- Add Movement Modal -->
<div id="addMovementModal" class="modal hidden">
  <div class="modal-content">
    <span class="close">&times;</span>
    <h3>Add Stock Movement</h3>
    <form id="addMovementForm">
      <label for="add-stockId">Stock ID:</label>
      <input type="text" id="add-stockId" placeholder="e.g., STK001" required>
      <span id="add-stock-availability" class="availability-info"></span>

      <label for="add-movementType">Movement Type:</label>
      <select id="add-movementType" required>
        <option value="">Select Type</option>
        <option value="Inbound">Inbound</option>
        <option value="Outbound">Outbound</option>
      </select>

      <label for="add-category">Category:</label>
      <select id="add-category" required>
        <option value="">Select Category</option>
        <option value="Shirts">Shirts</option>
        <option value="Pants">Pants</option>
        <option value="Accessories">Accessories</option>
      </select>

      <label for="add-from">From:</label>
      <input type="text" id="add-from" placeholder="Source location" required>

      <label for="add-to">To:</label>
      <input type="text" id="add-to" placeholder="Destination location" required>

      <label for="add-quantity">Quantity:</label>
      <input type="number" id="add-quantity" min="1" required>

      <button type="submit" class="primary-btn">Save</button>
    </form>
  </div>
</div>

<!-- Edit Movement Modal -->
<div id="editMovementModal" class="modal hidden">
  <div class="modal-content">
    <span class="close">&times;</span>
    <h3>Edit Stock Movement</h3>
    <form id="editMovementForm">
      <input type="hidden" id="edit-movementId">

      <label for="edit-stockId">Stock ID:</label>
      <input type="text" id="edit-stockId" placeholder="e.g., STK001" required>
      <span id="edit-stock-availability" class="availability-info"></span>

      <label for="edit-movementType">Movement Type:</label>
      <select id="edit-movementType" required>
        <option value="">Select Type</option>
        <option value="Inbound">Inbound</option>
        <option value="Outbound">Outbound</option>
      </select>

      <label for="edit-category">Category:</label>
      <select id="edit-category" required>
        <option value="">Select Category</option>
        <option value="Shirts">Shirts</option>
        <option value="Pants">Pants</option>
        <option value="Accessories">Accessories</option>
      </select>

      <label for="edit-from">From:</label>
      <input type="text" id="edit-from" placeholder="Source location" required>

      <label for="edit-to">To:</label>
      <input type="text" id="edit-to" placeholder="Destination location" required>

      <label for="edit-quantity">Quantity:</label>
      <input type="number" id="edit-quantity" min="1" required>

      <div class="button-group">
        <button type="submit" class="primary-btn">Save</button>
        <button type="button" id="deleteMovementBtn" class="danger-btn">Delete</button>
      </div>
    </form>
  </div>
</div>

<script src="../js/auth.js"></script>
<script src="../js/movement.js"></script>

<!-- Mobile Bottom Navigation -->
<nav class="mobile-bottom-nav">
    <a href="dashboard.html">
        <span class="nav-label">Dashboard</span>
    </a>
    <a href="products.html">
        <span class="nav-label">Products</span>
    </a>
    <a href="inventory.html" class="active">
        <span class="nav-label">Inventory</span>
    </a>
    <a href="suppliers.html">
        <span class="nav-label">Suppliers</span>
    </a>
    <a href="settings.html">
        <span class="nav-label">Settings</span>
    </a>
</nav>

<script>
  function toggleSidebar() {
    document.querySelector(".sidebar").classList.toggle("collapsed");
    document.querySelector(".main-content").classList.toggle("expanded");
  }
</script>
</body>
</html>
